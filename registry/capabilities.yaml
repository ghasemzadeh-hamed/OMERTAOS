capabilities:
  qdrant.readwrite:
    provider: docker_compose
    template: deploy/capabilities/qdrant.compose.yml.j2
    env:
      QDRANT_PORT: 6333
      QDRANT_VOLUME: data/qdrant
    health:
      url: "http://localhost:{{QDRANT_PORT}}/healthz"
      expect_json:
        status: ok
    depends_on: []

  minio.objectstore:
    provider: docker_compose
    template: deploy/capabilities/minio.compose.yml.j2
    env:
      MINIO_PORT: 9000
      MINIO_CONSOLE: 9001
      MINIO_DATA_DIR: data/minio
    vault_env:
      MINIO_ROOT_USER: secret/data/minio#root_user
      MINIO_ROOT_PASSWORD: secret/data/minio#root_password
    health:
      tcp:
        - "localhost:{{MINIO_PORT}}"
        - "localhost:{{MINIO_CONSOLE}}"
    depends_on: []

  mongo.registry:
    provider: docker_compose
    template: deploy/capabilities/mongo.compose.yml.j2
    env:
      MONGO_PORT: 27017
      MONGO_DATA_DIR: data/mongo
    depends_on: []

  clickhouse.analytics:
    provider: docker_compose
    template: deploy/capabilities/clickhouse.compose.yml.j2
    env:
      CLICKHOUSE_HTTP_PORT: 8123
      CLICKHOUSE_TCP_PORT: 9000
      CLICKHOUSE_DATA_DIR: data/clickhouse
    depends_on: []

  kafka.stream:
    provider: docker_compose
    template: deploy/capabilities/kafka.compose.yml.j2
    env:
      KAFKA_PORT: 9092
      KAFKA_BROKER_ID: 1
    depends_on: []

  n8n.workflow:
    provider: docker_compose
    template: deploy/capabilities/n8n.compose.yml.j2
    env:
      N8N_PORT: 5678
      N8N_DATA_DIR: data/n8n
    depends_on: []
